#!/usr/bin/env raku

use v6.e.PREVIEW;

multi sub MAIN($filename) {
  ($filename ~~ / \.bak$ /) 
    ?? move($filename, $filename.subst(/\.bak$/, '')) 
    !! move($filename, "$filename.bak");
}

multi sub MAIN($filename, Bool :c(:$copy)!) {
  ($filename ~~ / \.bak$ /) 
    ?? copy($filename, $filename.subst(/\.bak$/, '')) 
    !! copy($filename, "$filename.bak");
}


# Raku provides some hooks to override CLI behavior, like if you define the
# ARGS-TO-CAPTURE function you can preprocess arguments before dispatching to
# MAIN.

# You can define the special hash %*SUB-MAIN-OPTS to configure how the arguments
# are parsed. F.ex if you add the :bundling key, then it will accept -abc in
# addition to -a -b -c.
